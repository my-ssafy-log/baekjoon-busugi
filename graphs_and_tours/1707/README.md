# 1707 이분 그래프

[링크](https://www.acmicpc.net/problem/1707)

## 문제 해설

이분 그래프란? 정점의 집합을 두 집합으로 나누었을 때, 각 집합 내에 정점들이 서로 인접해 있지 않는 상태로 나누는게 가능한 그래프를 이분 그래프라고 한다.  
다르게 표현하면 정점을 두 개의 색만으로 칠한다고 했을 때 인접한 두 정점이 다른 색을 가지며 그래프를 색칠할 수 있는 때를 말한다.  
먼저 테스트케이스의 수 K를 입력받는데  
$2 \le K \le 5$  
각 테스트케이스의 첫째줄엔 정점 개수 V, E가 주어지고  
그 밑에는 E개의 간선의 정보, 정점 $u_i$와 정점 $v_i$가 주어진다.  
$1 \le V \le 20,000$  
$1 \le E \le 200,000$

DFS로 정점 하나를 색칠하는 것을 시작으로 색칠을 하지 않은 인접한 정점에 현재 정점과 다른 색으로 색칠을 해가면서  
만약 인접한 정점에 이미 색칠이 되어 있다면 현재 정점과 같은 색인지 판별하여 이분 그래프를 판별하도록 구현하였다.

## 코드 해설
DFS로 구현을 시도하였다.  
파이썬은 재귀가 1,000번이 한계이므로 스택 자료구조를 이용하여 구현할 수 있었다.
스택에는 `(현재 정점, 색상)` 이 들어가는데 이 색상은 1 아니면 2로 2가지이다.  

visited 배열의 i번 정점은 방문하지 않았다면 0, 방문했다면 색상 1 아니면 2의 값을 갖는다.  

```python
while stack:
    cur, color = stack.pop()
    for nbr in graph[cur]:
        if visited[nbr]:  # 만약 이미 색상이 삽입된 상태인데
            if visited[nbr] == color:  # cur과 인접한 nbr가 cur의 color와 같다면
                is_bipartite = False
                return
            continue
```

DFS를 하면서 만약 인접한 정점이 색을 가지고 있다면 (visited[nbr]가 0이 아니라면) 현재 색상과 같은지 판단해  
만약에 현재 색상과 같다면 이분 그래프인지 bool 값은 담는 `is_bipartite` 에 False를 넣고 함수를 벗어난다.

```python
for v in range(1, V+1):
    if visited[v]: continue
    dfs(v, 1)
```

모든 정점이 하나의 그래프로 연결된 게 아닐 수도 있기 때문에 dfs는 1부터 시작해 방문하지 않은 정점을 시작점으로 해 모두 이분 그래프인지 탐색을 한다.  

그래프가 나눠져 있어도 모두 두가지의 색상으로 인접한 정점이 서로 같지 않게 색을 칠할 수 있는 경우,  
정점의 집합은 둘로 나눴을 때 각 집합 내 정점들이 서로 인접하지 않는 경우가 발생하기 때문에  
방문하지 않은 모든 정점을 시작점으로 dfs를 돌려도 괜찮은 것이다.